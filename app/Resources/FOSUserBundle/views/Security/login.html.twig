{% trans_default_domain 'FOSUserBundle' %}
{% extends "FOSUserBundle::layout.html.twig" %}
{% form_theme registerForm 'form/user_form_input.html.twig' %}

{% block page_title %}Connexion{% endblock %}

{% block fos_user_content %}
    <div class="login_wrapper" xmlns="http://www.w3.org/1999/html">
        <div class="animate form login_form">
            <section class="login_content">
                <form role="form" action="{{ path("fos_user_security_check") }}" method="post">
                    <h1>Se connecter</h1>
                    {% if csrf_token %}
                        <input type="hidden" name="_csrf_token" value="{{ csrf_token }}" />
                    {% endif %}
                    {% if error %}
                        <div class="alert alert-danger top-alert-error" role="alert">
                            <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                            <span class="sr-only">Erreur:</span>
                            {{ error.messageKey|trans(error.messageData, 'security') }}
                        </div>
                    {% endif %}
                    <div class="col-md-12 col-sm-12 col-xs-12 form-group has-feedback">
                        <input name="_username" id="username" type="text" class="form-control has-feedback-left" placeholder="Identifiant" value="{{ last_username }}">
                        <span aria-hidden="true" class="fa fa-user form-control-feedback left"></span>
                    </div>

                    <div class="col-md-12 col-sm-12 col-xs-12 form-group has-feedback">
                        <input name="_password" id="password" type="password" class="form-control has-feedback-left" placeholder="Mot de passe" value="{{ last_username }}" required="">
                        <span aria-hidden="true" class="fa fa-lock form-control-feedback left"></span>
                        <input type="hidden" name="_target_path" value="account" />
                    </div>
                    <div>
                        <button type="submit" class="btn btn-success submit">Connexion</button>
                        {#<a class="reset_pass" href="#">Lost your password?</a>#}
                    </div>
                    <div class="clearfix"></div>

                    <div class="separator">
                        <p class="change_link">Pas encore de compte ?
                            <a href="#signup" class="to_register">S'enregistrer</a>
                        </p>
                        <div class="clearfix"></div>
                        <br />
                        <p class="change_link">Mot de passe oublié ?
                            <a href="#pwd-forgotten" class="to_pwd-forgotten">Réinitialiser</a>
                        </p>
                        <div class="clearfix"></div>
                        <br />
                        {% include ":common:public_footer.html.twig"%}
                    </div>
                </form>
            </section>
        </div>

        <div id="register" class="animate form registration_form">
            <section class="login_content">
                {{ form_start(registerForm, {'method': 'post', 'action': path('fos_user_registration_register'), 'attr': {'class': 'fos_user_registration_register'}}) }}
                <h1>Créer un compte</h1>
                <div class="col-md-12 col-sm-12 col-xs-12 form-group has-feedback">
                    {{ form_widget(registerForm.email, {'attr': {'class': 'form-control has-feedback-left', 'placeholder': 'Email'} }) }}
                    <span aria-hidden="true" class="fa fa-at form-control-feedback left"></span>
                </div>
                <div class="col-md-12 col-sm-12 col-xs-12 form-group has-feedback">
                    {{ form_widget(registerForm.username, {'attr': {'class': 'form-control has-feedback-left', 'placeholder': 'Pseudo'}}) }}
                    <span aria-hidden="true" class="fa fa-user form-control-feedback left"></span>
                </div>
                {{ form_row(registerForm.plainPassword) }}
                <div>
                    <button type="submit" class="btn btn-default submit btn-info" href="#">Créer</button>
                </div>
                <div class="clearfix"></div>

                <div class="separator">
                    <p class="change_link">Déjà enregistré ?
                        <a href="#signin" class="to_register">Se connecter</a>
                    </p>

                    <div class="clearfix"></div>
                    <br />

                    {% include ":common:public_footer.html.twig"%}
                </div>
                {{ form_end(registerForm) }}
            </section>
        </div>

        <div id="pwd-forgotten" class="animate form pwdreset_form">
            <section class="pwdreset_content login_content">
                <form action="{{ path('fos_user_resetting_send_email') }}" method="POST" class="fos_user_resetting_request">
                    <h1>Mot de passe oublié</h1>
                        <div class="col-md-12 col-sm-12 col-xs-12 form-group has-feedback">
                            <input name="username" id="username" type="text" class="form-control has-feedback-left" placeholder="{{ 'resetting.request.username'|trans }}" required="required" value="{{ last_username }}">
                            <span aria-hidden="true" class="fa fa-user form-control-feedback left"></span>
                        </div>
                    <div>
                        <button type="submit" class="btn btn-primary submit">{{ 'resetting.request.submit'|trans }}</button>
                    </div>
                    <div class="clearfix"></div>

                    <div class="separator">
                        <p class="change_link">On s'en souvient ?
                            <a href="#signin" class="to_register">Se connecter</a>
                        </p>  <div class="clearfix"></div>
                        <br />
                        <p class="change_link">Pas encore de compte ?
                            <a href="#signup" class="to_register">S'enregistrer</a>
                        </p>
                        <div class="clearfix"></div>
                        <br />
                        {% include ":common:public_footer.html.twig"%}
                    </div>
                </form>
            </section>
        </div>
    </div>
{% endblock fos_user_content %}